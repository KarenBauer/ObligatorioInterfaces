<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">
<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

<dom-module id="book-element">
  <template>
    <style>

      .books{
        color: white; 
        display: block; 
        text-align: center;
      }
      .book-buy{
        color: white;
        background: #ec6262;
        margin: auto;
        text-align: center;
      }
      .book-title{
        text-align: center;
        width: 70%;
        margin: auto;
      }
      img{
        height: 300px;
        width: auto;
      }
      .book-img{
        margin: auto;
        width: inherit;
      }

    </style>

    <iron-ajax auto
               url="api/books/[[ bookId ]]/book_detail.json"
               params=""
               handle-as="json"
               last-response="{{ _booksArray }}"
               debounce-duration="300">
    </iron-ajax>

    <template is="dom-repeat"
              items="[[ _booksArray ]]">
      <div class="books">
        <div class="book-img">
          <img src="[[item.image]]">
        </div>
        <div class="book-content">
          <div class="book-title">[[item.title]]</div>
          <div class="buy-button">
            <paper-button onclick="link_detail(1)" class="book-buy">Buy</paper-button>
          </div>
        </div> 
      </div>
    </template>
  </template>

  <script>
    // element registration
    Polymer({
      is: "book-element",
      properties: {
        bookId: {
          type: Number
        }
    }
  });
  </script>

  <script>
    function link_detail(book_id){
        window.location = "detail.html?id=" + bookId;
    } 
  </script>
</dom-module>